Mind, you I don't really know C/C++ so this is probably badly coded... use at your own risk
